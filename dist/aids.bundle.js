function e(e){if(null===e)return t(e,"null");const n=typeof e;return t(e,"object"!==n?n:e?.constructor?.name??"Object")}function t(e,t){return new class{constructor(e){this.value=e}valueOf(){return t}subType(){switch(t){case"null":case"undefined":case"boolean":case"string":case"symbol":default:return"";case"number":return Number.isInteger(e)?"integer":Number.isNaN(e)?"NaN":e==1/0?"Infinity":"float";case"function":return"Function"==e.constructor.name?e.toString().match(/^function/g)?.length?"Function":e.toString().match(/^class/g)?.length?"Class":"Arrow":e.constructor.name}}name(){return"function"==t?e.name:""}}(e)}function n(e){e=e.replace(/=+$/,"");return atob(e).toString("utf-8")}function r(e){const t=new Uint8Array(e);let n="";for(const e of t)n+=String.fromCharCode(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}const o=new TextDecoder,c=new TextEncoder;const a={string:(e,t)=>t.includes(e),array:(e,t)=>t.some((t=>t.includes(e))),Object:function(e,t){for(const n in t){if(n.includes(e))return!0;if(t[n].includes(e))return!0}return!1}};function s(t){return{in:function(n){const r=e(n);return a[r]?.(t,n)??!1}}}async function i(e="https://raw.githubusercontent.com/Srabutdotcom/aid/master/whatis/whatis.js"){const t=await fetch(e);if(!t.ok)return void console.error("Failed to fetch the file");const n=await t.blob();return await import(URL.createObjectURL(new Blob([n],{type:"text/javascript"})))}async function u(e="https://picsum.photos/200/300",t,n){const r=await fetch(e);if(!r.ok)return console.error("Failed to fetch the file"),"";const o=r.headers.get("Content-Type"),c=r.headers.get("Content-Length"),a=Math.max(Math.round(c/100),4096),s=r.body.getReader({mode:"byob"});let i=new Uint8Array(a),u=0,l=new Uint8Array,f="";for(;;){const{value:e,done:t}=await s.read(new Uint8Array(i.buffer,u,i.buffer.byteLength-u));if(t)break;l=new Uint8Array([...l,...e]),i=new Uint8Array(l.buffer.byteLength+a),u+=e.byteLength,console.log(`Received ${u} bytes so far`),f=URL.createObjectURL(new Blob([l],{type:o})),b(f,u/c)}function b(e,r){t&&(t.src=e),n&&(n.value=r)}return console.log("Image fully received and processed!"),f}async function l(e="https://picsum.photos/200/300",t,n){const r=await fetch(e);if(!r.ok)return console.error("Failed to fetch the file"),"";const o=r.headers.get("Content-Type"),c=r.headers.get("Content-Length"),a=r.body.getReader(),s=[];let i=0,u="";for(;;){const{done:e,value:t}=await a.read();if(e){const e=new Blob(s,{type:o});u=URL.createObjectURL(e),l(u,1);break}i+=t.length,s.push(t);const n=new Blob(s,{type:o});u=URL.createObjectURL(n),l(u,i/c),console.log(`Received ${i} bytes`)}function l(e,r){t&&(t.src=e),n&&(n.value=r)}return u}export{n as base64url_to_string,r as bufferToBase64URLString,o as decoder,c as encoder,u as fetchByteStream,l as fetchStream,i as importJs,s as searchString,e as whatis};
